<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Vendor List</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body data-category="vendor-list">
  <div class="container">
    <a href="index.html" class="back-button">‚Üê Back</a>
    <h1>Vendor List üßæ</h1>

    <form id="vendorForm" class="delivery-form">
      <label>Company</label>
      <input type="text" id="company" placeholder="Company Name">

      <label>First Name</label>
      <input type="text" id="name" placeholder="First Name">

      <label>Last Name</label>
      <input type="text" id="lastname" placeholder="Last Name">

      <label>Position</label>
      <input type="text" id="position" placeholder="Position">

      <label>Contact Number</label>
      <input type="text" id="contact" placeholder="(###) ###-####">

      <label>
        <input type="checkbox" id="nda"> NDA Signed
      </label>

      <button type="submit">Save Entry</button>
    </form>

    <div id="vendorLog" style="margin-top: 2rem;"></div>

    <script>
      const form = document.getElementById('vendorForm');
      const vendorLog = document.getElementById('vendorLog');

      function loadVendors() {
        const vendors = JSON.parse(localStorage.getItem('vendorList')) || [];
        if (vendors.length === 0) {
          vendorLog.innerHTML = "";
          return;
        }

        let html = `<h3>Saved Vendors:</h3><table border="1" cellpadding="5"><tr>
                      <th>Company</th>
                      <th>First Name</th>
                      <th>Last Name</th>
                      <th>Position</th>
                      <th>Contact Number</th>
                      <th>NDA</th>
                      <th>Actions</th>
                    </tr>`;

        vendors.forEach((v, index) => {
          html += `<tr>
                    <td>${v.company}</td>
                    <td>${v.name}</td>
                    <td>${v.lastname}</td>
                    <td>${v.position}</td>
                    <td>${v.contact}</td>
                    <td>${v.nda}</td>
                    <td>
                      <button onclick="editVendor(${index})">Edit</button>
                      <button onclick="deleteVendor(${index})">Delete</button>
                    </td>
                  </tr>`;
        });

        html += `</table>`;
        vendorLog.innerHTML = html;
      }

      function saveVendors(vendors) {
        localStorage.setItem('vendorList', JSON.stringify(vendors));
        loadVendors();
      }

      form.addEventListener('submit', function(e) {
        e.preventDefault();

        const newVendor = {
          company: document.getElementById('company').value,
          name: document.getElementById('name').value,
          lastname: document.getElementById('lastname').value,
          position: document.getElementById('position').value,
          contact: document.getElementById('contact').value,
          nda: document.getElementById('nda').checked ? 'Signed' : 'Not Signed'
        };

        const vendors = JSON.parse(localStorage.getItem('vendorList')) || [];
        vendors.push(newVendor);
        saveVendors(vendors);
        form.reset();
      });

      window.editVendor = function(index) {
        const vendors = JSON.parse(localStorage.getItem('vendorList')) || [];
        const v = vendors[index];

        document.getElementById('company').value = v.company;
        document.getElementById('name').value = v.name;
        document.getElementById('lastname').value = v.lastname;
        document.getElementById('position').value = v.position;
        document.getElementById('contact').value = v.contact;
        document.getElementById('nda').checked = v.nda === 'Signed';

        vendors.splice(index, 1);
        saveVendors(vendors);
      };

      window.deleteVendor = function(index) {
        const vendors = JSON.parse(localStorage.getItem('vendorList')) || [];
        vendors.splice(index, 1);
        saveVendors(vendors);
      };

      loadVendors();
    </script>
  </div>

  <form id="entry-form">
    <input type="text" id="entry-input" placeholder="Add new entry" required>
    <button type="submit">Add</button>
  </form>
  <ul id="entries-list"></ul>

</body>
</html>
